<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Assembly Instructions Viewer</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div id="app">
    <!-- Station Selection Screen -->
    <div id="station-screen" class="screen active">
      <div class="station-container">
        <div class="station-header">
          <h1>Assembly Station</h1>
          <p class="subtitle">Select your workstation to begin</p>
        </div>
        <div class="station-list" id="station-list">
          <!-- Stations will be loaded dynamically -->
        </div>
        <div class="station-info">
          <p>1X - CONFIDENTIAL</p>
        </div>
      </div>
    </div>

    <!-- Serial Number Entry Screen -->
    <div id="sn-screen" class="screen">
      <div class="sn-container">
        <div class="sn-header">
          <p class="station-badge" id="selected-station-name"></p>
          <h1 id="document-title">Assembly Instructions</h1>
          <p class="document-id" id="station-id-display"></p>
        </div>
        <div class="sn-form">
          <label for="serial-number">Scan or Enter Product Serial Number</label>
          <div class="input-group">
            <input
              type="text"
              id="serial-number"
              placeholder="Enter Serial Number..."
              autocomplete="off"
              autofocus
            >
            <button id="start-btn" class="btn-primary">Start Assembly</button>
          </div>
          <p id="sn-error" class="error-message"></p>
        </div>
        <div class="sn-actions">
          <button id="back-to-stations" class="btn-secondary">Change Station</button>
        </div>
        <div class="sn-info">
          <p>1X - CONFIDENTIAL</p>
        </div>
      </div>
    </div>

    <!-- Assembly Instructions Viewer -->
    <div id="viewer-screen" class="screen">
      <!-- Header -->
      <header class="viewer-header">
        <div class="header-left">
          <span class="station-id-badge" id="viewer-station-id"></span>
          <span class="doc-title" id="viewer-doc-title">Assembly Instructions</span>
          <span class="serial-display">SN: <span id="current-sn"></span></span>
        </div>
        <div class="header-center">
          <span class="page-indicator">
            Page <span id="current-page">1</span> of <span id="total-pages">-</span>
          </span>
        </div>
        <div class="header-right">
          <div class="timer-display">
            <span class="timer-label">Page Time:</span>
            <span id="page-timer">00:00</span>
          </div>
          <div class="timer-display">
            <span class="timer-label">Total Time:</span>
            <span id="total-timer">00:00:00</span>
          </div>
        </div>
      </header>

      <!-- Main Content Area -->
      <main class="viewer-main">
        <!-- Navigation Arrow Left -->
        <button id="prev-btn" class="nav-arrow nav-prev" disabled>
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="15 18 9 12 15 6"></polyline>
          </svg>
        </button>

        <!-- PDF Page Display -->
        <div class="page-container">
          <div id="page-content" class="page-content">
            <!-- PDF page will be rendered here -->
            <canvas id="pdf-canvas"></canvas>
          </div>
        </div>

        <!-- Navigation Arrow Right -->
        <button id="next-btn" class="nav-arrow nav-next">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <polyline points="9 18 15 12 9 6"></polyline>
          </svg>
        </button>
      </main>

      <!-- Footer with progress bar -->
      <footer class="viewer-footer">
        <div class="progress-bar">
          <div id="progress-fill" class="progress-fill" style="width: 2.5%"></div>
        </div>
        <div class="footer-actions">
          <button id="complete-btn" class="btn-complete" style="display: none;">
            Complete Assembly
          </button>
        </div>
      </footer>
    </div>

    <!-- Completion Screen -->
    <div id="complete-screen" class="screen">
      <div class="complete-container">
        <div class="complete-icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
            <polyline points="22 4 12 14.01 9 11.01"></polyline>
          </svg>
        </div>
        <h1>Assembly Complete!</h1>
        <div class="complete-details">
          <div class="detail-row">
            <span class="detail-label">Station:</span>
            <span id="complete-station" class="detail-value"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Serial Number:</span>
            <span id="complete-sn" class="detail-value"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Total Time:</span>
            <span id="complete-time" class="detail-value"></span>
          </div>
          <div class="detail-row">
            <span class="detail-label">Pages Viewed:</span>
            <span id="complete-pages" class="detail-value"></span>
          </div>
        </div>
        <div class="complete-summary">
          <h3>Time per Page Summary</h3>
          <div id="page-time-summary" class="page-time-grid">
            <!-- Page time summary will be populated here -->
          </div>
        </div>
        <button id="new-assembly-btn" class="btn-primary">Start New Assembly</button>
      </div>
    </div>
  </div>

  <!-- PDF.js library -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.min.js"></script>
  <script>
    pdfjsLib.GlobalWorkerOptions.workerSrc = 'https://cdnjs.cloudflare.com/ajax/libs/pdf.js/3.11.174/pdf.worker.min.js';
  </script>
  <script src="app.js"></script>
</body>
</html>
